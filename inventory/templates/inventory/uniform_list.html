{% extends "base.html" %}

{% block title %}Uniform Inventory{% endblock %}

{% block content %}
<!-- Low Stock Warning Section -->
{% if low_stock_uniforms %}
<div class="alert alert-warning mb-4">
  <h4 class="alert-heading"><i class="bi bi-exclamation-triangle-fill me-2"></i>Low Stock Warning</h4>
  <p>The following uniforms are below the recommended stock level (25 units):</p>
  <div class="row">
    {% for uniform in low_stock_uniforms %}
    <div class="col-md-4 mb-2">
      <span class="badge {% if uniform.stock_quantity < 5 %}bg-danger{% elif uniform.stock_quantity < 10 %}bg-warning{% elif uniform.stock_quantity < 25 %}bg-info{% endif %} me-1">
        {{ uniform.stock_quantity }}
      </span>
      {{ uniform.name }} ({{ uniform.size }})
    </div>
    {% endfor %}
  </div>
</div>
{% else %}
<div class="alert alert-success mb-4">
  <h4 class="alert-heading"><i class="bi bi-check-circle-fill me-2"></i>Stock Status</h4>
  <p class="mb-0">All uniform items have sufficient stock levels.</p>
</div>
{% endif %}

<div class="card">
  <div class="card-header d-flex justify-content-between align-items-center">
    <h2 class="mb-0">Uniform Inventory</h2>
    <div>
      <a href="{% url 'inventory:import_uniforms' %}" class="btn btn-success me-2">
        <i class="bi bi-file-earmark-excel me-1"></i>Import from Excel
      </a>
      <a href="{% url 'admin:inventory_uniform_add' %}" class="btn btn-primary" target="_blank">
        <i class="bi bi-plus-circle me-1"></i>Add New Uniform (Admin)
      </a>
    </div>
  </div>
  <div class="card-body">
    <div class="table-responsive">
      <table class="table table-striped table-hover">
        <thead class="table-dark">
          <tr>
            <th>Name</th>
            <th>Size</th>
            <th>Price</th>
            <th>Stock Quantity</th>
            <th>Actions</th>
          </tr>
        </thead>
        <tbody>
          {% for uniform in uniforms %}
          <tr>
            <td>{{ uniform.name }}</td>
            <td>{{ uniform.size }}</td>
            <td>${{ uniform.price }}</td>
            <td>
              <span class="badge {% if uniform.stock_quantity < 5 %}bg-danger{% elif uniform.stock_quantity < 10 %}bg-warning{% elif uniform.stock_quantity < 25 %}bg-info{% else %}bg-success{% endif %}">
                {{ uniform.stock_quantity }}
                {% if uniform.stock_quantity < 25 %}<i class="bi bi-exclamation-triangle-fill ms-1"></i>{% endif %}
              </span>
            </td>
            <td>
              <div class="btn-group" role="group">
                <a href="{% url 'admin:inventory_uniform_change' uniform.id %}" class="btn btn-sm btn-outline-primary" target="_blank">
                  <i class="bi bi-pencil"></i>
                </a>
                <a href="{% url 'admin:inventory_uniform_delete' uniform.id %}" class="btn btn-sm btn-outline-danger" target="_blank">
                  <i class="bi bi-trash"></i>
                </a>
              </div>
            </td>
          </tr>
          {% empty %}
          <tr>
            <td colspan="5" class="text-center">No uniforms available.</td>
          </tr>
          {% endfor %}
        </tbody>
      </table>
    </div>
  </div>
</div>
{% endblock %} 